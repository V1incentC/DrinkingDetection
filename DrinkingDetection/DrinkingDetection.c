#include <stdbool.h>
#include <stdint.h>

#ifdef __cplusplus
extern "C" {
#endif
	
#include "nrf_delay.h"
#include "nrf_gpio.h"
#include "boards.h"
#include "nrf_log.h"
#include "nrf_log_ctrl.h"
#include "nrf_log_default_backends.h"
#include "imu_api.h"
#include "imu_low_level.h"
#include "lsm6dsl/lsm6dsl_reg.h"
#include "bsp.h"
#include "calculation_features.h"
#include "machine_learning_features.h"
#include  "arm_math.h"
#include "XGBoost.h"

#ifdef __cplusplus
}
#endif
#define BUTTON NRF_GPIO_PIN_MAP(0,24)
const uint8_t leds_list[LEDS_NUMBER] = LEDS_LIST;
float feature[294];

float32_t accX_buff[256] = {-0.2469280064105987,-0.2527840137481689,-0.2543700039386749,-0.255834013223648,-0.2603480219841003,-0.2629100084304809,
                           -0.261568009853363,-0.2633980214595794,-0.2641910016536712,-0.2605310082435608,-0.2572370171546936,
                           -0.2534550130367279,-0.2469890117645263,-0.2424140125513076,-0.2410110086202621,-0.2383880168199539,
                           -0.2435120046138763,-0.2496120035648346,-0.2573589980602264,-0.2638860046863556,-0.265045017004013,
                           -0.2630320191383362,-0.2660820186138153,-0.2626660168170929,-0.2596770226955414,-0.2572980225086212,
                           -0.2559560239315033,-0.2552850246429443,-0.2553460001945495,-0.2555290162563324,-0.2567490041255951,
                           -0.2589450180530548,-0.2600430250167846,-0.2577860057353973,-0.2563219964504242,-0.253028005361557,
                           -0.2503440082073211,-0.2546750009059906,-0.254613995552063,-0.254919022321701,-0.25559002161026,
                           -0.2553460001945495,-0.2549799978733063,-0.2546750009059906,-0.2541260123252868,-0.2529670000076294,
                           -0.253942996263504,-0.2513200044631958,-0.2497340142726898,-0.2495510131120681,-0.2501000165939331,
                           -0.2509540021419525,-0.25211301445961,-0.2623610198497772,-0.2592500150203705,-0.2663260102272033,
                           -0.2655940055847168,-0.2660820186138153,-0.2604700028896332,-0.2560780048370361,-0.2591890096664428,
                           -0.2567490041255951,-0.2526620030403137,-0.2496120035648346,-0.2501610219478607,-0.2476600110530853,
                           -0.2400350123643875,-0.2464400082826614,-0.2479040026664734,-0.2517470121383667,-0.2509540021419525,
                           -0.2518690228462219,-0.2515639960765838,-0.2611410021781921,-0.2628490030765533,-0.2598600089550018,
                           -0.2491240054368972,-0.2284450083971023,-0.2629100084304809,-0.3686230182647705,-0.3188470005989074,
                           -0.2635810077190399,-0.2116090059280395,-0.1870260089635849,-0.2100840061903,-0.2097790092229843,
                           -0.1653100103139877,-0.1240740045905113,-0.1299910098314285,-0.0819230005145073,-0.017629001289606,
                           0.0108580002561211,0.0661850050091743,0.0902190059423446,0.1147410050034523,0.1440210044384002,
                           -0.0771650001406669,-0.0996740013360977,-0.1210240051150322,-0.1124840080738067,-0.1007720008492469,
                           -0.0989420041441917,-0.0999180004000663,-0.1053470075130462,-0.1189500018954277,-0.1169980019330978,
                           -0.1192550063133239,-0.1274290084838867,-0.1180960014462471,-0.1240740045905113,-0.1190110072493553,
                           -0.0998570024967193,-0.0594750009477138,-0.0677100047469139,-0.1237690076231956,-0.1526830047369003,
                           -0.1629920005798339,-0.1925160139799118,-0.2427800148725509,-0.2286890149116516,-0.2929220199584961,
                           -0.3124420046806335,-0.3256179988384247,-0.3498960137367248,-0.347212016582489,-0.3167120218276977,
                           -0.2871880233287811,-0.2849920094013214,-0.2827350199222564,-0.2418650090694427,-0.179950013756752,
                           -0.1819020062685012,-0.1880630105733871,-0.1546350121498108,-0.084424003958702,-0.0328180007636547,
                           -0.0257420018315315,-0.0107360007241368,0.0389790013432502,0.0885110050439834,0.1256600022315979,
                           0.1433500051498413,0.1922110021114349,0.2408280074596405,0.2880420088768005,0.3353170156478882,
                           0.3522140085697174,0.3644140064716339,0.3812500238418579,0.4076020121574402,0.4327950179576874,
                           0.4271220266819,0.4349910318851471,0.4443850219249725,0.4571340084075928,0.4640270173549652,
                           0.4905620217323303,0.4981260299682617,0.5078250169754028,0.5049580335617065,0.4991020262241363,
                           0.5107530355453491,0.527649998664856,0.5324079990386963,0.5334450006484985,0.5411310195922852,
                           0.5480239987373352,0.565043032169342,0.5706550478935242,0.5830990076065063,0.5901139974594116,
                           0.5838310122489929,0.5868200063705444,0.5950550436973572,0.6007280349731445,0.6001790165901184,
                           0.6075600385665894,0.5970680117607117,0.6020700335502625,0.5954210162162781,0.5996299982070923,
                           0.597678005695343,0.5944450497627258,0.5959700345993042,0.5847460031509399,0.5962750315666199,
                           0.6048760414123535,0.6102440357208252,0.6076820492744446,0.6204310059547424,0.61701500415802,
                           0.6205530166625977,0.6169540286064148,0.6200039982795715,0.6240910291671753,0.62848299741745,
                           0.6351930499076843,0.624396026134491,0.6238470077514648,0.6199430227279663,0.6093900203704834,
                           0.5849290490150452,0.5775480270385742,0.5946890115737915,0.5845630168914795,0.6003010272979736,
                           0.5899920463562012,0.5745590329170227,0.5597360134124756,0.5679100155830383,0.5738880038261414,
                           0.5849900245666504,0.578341007232666,0.5857830047607422,0.5854170322418213,0.5868200063705444,
                           0.569191038608551,0.56638503074646,0.5632740259170532,0.564067006111145,0.5761450529098511,
                           0.578402042388916,0.5789510011672974,0.5871250033378601,0.5771819949150085,0.5819399952888489,
                           0.5744979977607727,0.582550048828125,0.5809029936790466,0.5704110264778137,0.570044994354248,
                           0.570044994354248,0.5765720009803772,0.5780360102653503,0.5772430300712585,0.5791340470314026,
                           0.5777310132980347,0.5838310122489929,0.5896260142326355,0.5817570090293884,0.5758399963378906,
                           0.5749250054359436,0.5817570090293884,0.5795609951019287,0.5743150115013123,0.5849290490150452,
                           0.5762060284614563,0.5871860384941101,0.5884060263633728,0.5827330350875854,0.5849290490150452,
                           0.5902360081672668,0.5840750336647034,0.5853559970855713,0.5862100124359131,0.580597996711731};

float32_t accY_buff[256] = {-0.1769000142812729,-0.1757410019636154,-0.1808040142059326,-0.1829390078783035,-0.1785470098257064,-0.1773880124092102,
                           -0.1837930083274841,-0.1901370137929916,-0.190198004245758,-0.184342011809349,-0.1834270060062408,
                           -0.1820240020751953,-0.1782420128583908,-0.1809260100126266,-0.1837930083274841,-0.1825120002031326,
                           -0.175680011510849,-0.1692750006914138,-0.1640290021896362,-0.1667740046977996,-0.175680011510849,
                           -0.1826340109109878,-0.1883070021867752,-0.1891000121831894,-0.1916620135307312,-0.1954440027475357,
                           -0.1989210098981857,-0.1948950141668319,-0.1874530017375946,-0.1803160011768341,-0.1749480068683624,
                           -0.1710440069437027,-0.166591003537178,-0.1620770096778869,-0.1645170003175735,-0.1702510118484497,
                           -0.175680011510849,-0.181536003947258,-0.1812920123338699,-0.1819020062685012,-0.185135006904602,
                           -0.1880630105733871,-0.1912960112094879,-0.1965420097112655,-0.1916010081768036,-0.1813530027866363,
                           -0.1725080013275146,-0.17500901222229,-0.1772660017013549,-0.1785470098257064,-0.1803770065307617,
                           -0.1779980063438415,-0.1753140091896057,-0.1766560077667236,-0.1806820034980774,-0.1795840114355087,
                           -0.1795840114355087,-0.1895270049571991,-0.1933090090751648,-0.1786690056324005,-0.1711050122976303,
                           -0.1849520057439804,-0.1849520057439804,-0.1821460127830505,-0.181536003947258,-0.1803770065307617,
                           -0.1749480068683624,-0.1803160011768341,-0.1826950013637542,-0.1832440048456192,-0.1781200021505355,
                           -0.1758630126714706,-0.1681770086288452,-0.1343830078840255,-0.0985150039196014,-0.0638670027256012,
                           -0.0502030029892921,-0.1913570016622543,-0.3210430145263672,-0.3213480114936828,-0.2447930127382278,
                           -0.2032520025968551,-0.185257002711296,-0.1374330073595047,-0.1647610068321228,-0.1915400028228759,
                           -0.2093520015478134,-0.2393030077219009,-0.3251300156116485,-0.3736860156059265,-0.3562400043010711,
                           -0.3899730145931244,-0.4024170041084289,-0.3424540162086487,-0.3879600167274475,-0.4285860061645508,
                           -0.7302310466766357,-0.7224840521812439,-0.6938140392303467,-0.6686210036277771,-0.7044280171394348,
                           -0.7379170060157776,-0.7836670279502869,-0.8122760057449341,-0.8105680346488953,-0.8432640433311462,
                           -0.8554030060768127,-0.8658950328826904,-0.902129054069519,-0.8762650489807129,-0.8703480362892151,
                           -0.8209380507469177,-0.7425530552864075,-0.6921670436859131,-0.7543870210647583,-0.7804340124130249,
                           -0.7882420420646667,-0.7789090275764465,-0.7872050404548645,-0.7446880340576172,-0.8069080114364624,
                           -0.8805350065231323,-0.7573150396347046,-0.8712630271911621,-0.8465580344200134,-0.8764480352401733,
                           -0.8435080051422119,-0.8078230619430542,-0.8074570298194885,-0.8260010480880737,-0.8017230033874512,
                           -0.7703080177307129,-0.7717110514640808,-0.7745170593261719,-0.7782990336418152,-0.7599990367889404,
                           -0.765733003616333,-0.7411500215530396,-0.7233990430831909,-0.6729520559310913,-0.620248019695282,
                           -0.5521720051765442,-0.4710420072078705,-0.4180940091609955,-0.374845027923584,-0.3365980088710785,
                           -0.2807220220565796,-0.269864022731781,-0.2389370054006576,-0.1889170110225677,-0.2246020138263702,
                           -0.2515639960765838,-0.2274080067873001,-0.1666520088911056,-0.1120570078492164,-0.0988810062408447,
                           -0.0350750014185905,-0.0358680002391338,-0.0480680018663406,-0.0323300026357173,0.0028670001775026,
                           -0.0119560007005929,-0.0323300026357173,-0.052216000854969,-0.0786290019750595,-0.0924150049686431,
                           -0.0702110007405281,-0.0638060048222541,-0.0395890027284622,-0.0364169999957084,-0.0771650001406669,
                           -0.0638670027256012,-0.0405040010809898,0.0021960001904517,0.0160429999232292,-0.012810000218451,
                           -0.0452010035514831,-0.0540460012853145,-0.0173850003629922,0.0051850001327693,0.0353190004825592,
                           0.1289540082216262,0.1579290032386779,0.1295640021562576,0.0447740033268928,-0.0317810028791427,
                           -0.0055510001257061,0.0154330004006624,0.0904630050063133,0.1553670018911361,0.1419470012187957,
                           0.1304180026054382,0.1403000056743621,0.1329189985990524,0.1459120064973831,0.1697630137205124,
                           0.1757410019636154,0.1965420097112655,0.2486360073089599,0.2192950099706649,0.1944070011377334,
                           0.2158790081739425,0.3008520007133484,0.2793800234794616,0.2239920049905777,0.2211860120296478,
                           0.2651060223579407,0.3040240108966827,0.3378180265426636,0.3408070206642151,0.3491640090942383,
                           0.3620350062847137,0.3298270106315613,0.3440400063991546,0.3622180223464966,0.371612012386322,
                           0.4970280230045318,0.5186830163002014,0.5450350046157837,0.5544900298118591,0.5305780172348022,
                           0.5073980093002319,0.5149010419845581,0.5444250106811523,0.5521720051765442,0.5322250127792358,
                           0.5255150198936462,0.5382030010223389,0.5130100250244141,0.5130710005760193,0.5444860458374023,
                           0.5428390502929688,0.5315540432929993,0.5299680233001709,0.5270400047302246,0.5108140110969543,
                           0.5342990159988403,0.5568079948425293,0.5508910417556763,0.5380810499191284,0.5342380404472351,
                           0.5031279921531677,0.4953810274600982,0.5369830131530762,0.527649998664856,0.5066660046577454,
                           0.5671780109405518,0.5560150146484375,0.5204520225524902,0.5166700482368469,0.5249660015106201,
                           0.5379590392112732,0.5330179929733276,0.5269179940223694,0.5416190028190613,0.5302120447158813};

float32_t accZ_buff[256] = {0.9842350482940674,0.9945440292358398,1.0033890008926392,1.0028400421142578,0.9952760338783264,0.9876510500907898,
                           0.9846620559692384,0.9845400452613832,0.9860650300979614,0.9882610440254213,0.9919820427894592,
                           0.991372048854828,0.9908230304718018,0.991921067237854,0.9965570569038392,1.000766038894653,
                           1.0035110712051392,1.0053410530090332,1.004243016242981,0.9953370690345764,0.9861870408058168,
                           0.9838690161705016,0.9866140484809875,0.9914330244064332,0.9983870387077332,0.9977770447731018,
                           0.99003005027771,0.9824050664901732,0.9817950129508972,0.9875290393829346,0.9961910247802734,
                           0.9993630647659302,1.000766038894653,0.9975940585136414,0.9946660399436952,0.991921067237854,
                           0.9914330244064332,0.9952150583267212,0.9989970326423644,0.9977770447731018,0.9921650290489196,
                           0.9876510500907898,0.9901520609855652,0.9922260642051696,0.9933240413665771,0.9900910258293152,
                           0.9893590211868286,0.9911280274391174,0.9961910247802734,0.9993020296096802,1.0008879899978638,
                           0.9994240403175354,0.9986310601234436,0.998326063156128,0.9942390322685242,0.9925310611724854,
                           0.9828930497169496,0.9832590222358704,0.9866750240325928,0.9914330244064332,0.9939950108528136,
                           0.9944830536842346,0.9940560460090636,0.9901520609855652,0.9893590211868286,0.987712025642395,
                           0.9888710379600524,0.9959470629692078,1.0049140453338623,1.005645990371704,1.0025960206985474,
                           0.9973500370979308,0.9938120245933532,0.9823440313339232,0.9860040545463562,0.9961300492286682,
                           1.0404160022735596,1.0481630563735962,1.115751028060913,1.165466070175171,1.1799840927124023,
                           1.1923060417175293,1.2291500568389893,1.2495850324630735,1.241899013519287,1.179313063621521,
                           1.0923269987106323,1.0315710306167605,0.9007870554924012,0.8603440523147583,0.8787660598754883,
                           0.9380580186843872,0.9593470096588136,0.9428160190582277,0.8899900317192078,0.8513160347938538,
                           0.7986120581626892,0.7980630397796631,0.7904990315437317,0.8133740425109863,0.8024550080299377,
                           0.7619510293006897,0.7426750063896179,0.7490190267562866,0.7575590014457703,0.7336470484733582,
                           0.7033910155296326,0.6711220145225525,0.6544080376625061,0.6334240436553955,0.6503820419311523,
                           0.6600810289382935,0.6544080376625061,0.6200039982795715,0.6020700335502625,0.624396026134491,
                           0.6503210067749023,0.664900004863739,0.7240090370178223,0.7037570476531982,0.7398690581321716,
                           0.5938349962234497,0.6164050102233887,0.6134770512580872,0.6931430101394653,0.767685055732727,
                           0.8283190131187439,0.851377010345459,0.8325890302658081,0.8139840364456177,0.836249053478241,
                           0.908107042312622,0.9527590274810792,0.9246990084648132,0.8839510083198547,0.8654070496559143,
                           0.8851100206375122,0.9001770615577698,0.903898060321808,0.8709580302238464,0.8702260255813599,
                           0.8938330411911011,0.8931620121002197,0.8766310214996338,0.841312050819397,0.8291730284690857,
                           0.8396040201187134,0.841312050819397,0.832040011882782,0.8073960542678833,0.7808610200881958,
                           0.7847040295600891,0.8041020035743713,0.8195350170135498,0.8233780264854431,0.8078840374946594,
                           0.7944030165672302,0.7953790426254272,0.7967820167541504,0.8094700574874878,0.7963550090789795,
                           0.779153048992157,0.7899500131607056,0.8156920075416565,0.8232560157775879,0.820633053779602,
                           0.8214260339736938,0.835273027420044,0.8414340615272522,0.8222800493240356,0.8075790405273438,
                           0.8182540535926819,0.8441790342330933,0.8425930142402649,0.8293560147285461,0.8378960490226746,
                           0.8396040201187134,0.841251015663147,0.8374690413475037,0.8255740404129028,0.8059930205345154,
                           0.7983070611953735,0.816851019859314,0.8426540493965149,0.8391160368919373,0.831186056137085,
                           0.844057023525238,0.8602220416069031,0.8638820052146912,0.8313690423965454,0.806359052658081,
                           0.8211210370063782,0.8701650500297546,0.8908440470695496,0.8845610618591309,0.8537560105323792,
                           0.8192910552024841,0.8335650563240051,0.8282580375671387,0.7940370440483093,0.7969650030136108,
                           0.82886803150177,0.8239880204200745,0.7874490022659302,0.7618290185928345,0.7636590600013733,
                           0.7586570382118225,0.7654280066490173,0.7526790499687195,0.7294990420341492,0.7445050477981567,
                           0.7448710203170776,0.7660380601882935,0.7685390114784241,0.7665260434150696,0.7739070057868958,
                           0.6251280307769775,0.631350040435791,0.6362910270690918,0.6308010220527649,0.6276290416717529,
                           0.6343390345573425,0.6315330266952515,0.6348880529403687,0.6340340375900269,0.6254330277442932,
                           0.6325090527534485,0.6304960250854492,0.6301300525665283,0.6195770502090454,0.6306180357933044,
                           0.6476370096206665,0.6416590213775635,0.6295810341835022,0.6265920400619507,0.6139039993286133,
                           0.636352002620697,0.6544690132141113,0.6443430185317993,0.6426960229873657,0.6282390356063843,
                           0.6115249991416931,0.6085970401763916,0.6320210099220276,0.6458680033683777,0.6437940001487732,
                           0.6378160119056702,0.6378160119056702,0.6172590255737305,0.6251890063285828,0.6387310028076172,
                           0.6397680044174194,0.635498046875,0.6226270198822021,0.6475149989128113,0.6513580083847046};

float32_t gyrX_buff[256] = {0.3675000071525574,1.2599999904632568,1.618749976158142,2.012500047683716,2.414999961853028,2.126250028610229,
                           1.443750023841858,1.1200000047683716,1.181249976158142,0.7875000238418579,-0.0262500010430812,
                           -0.7787500023841858,-1.1637500524520874,-1.1024999618530271,-0.4375,0.6825000047683716,
                           1.8899999856948853,2.309999942779541,2.2225000858306885,1.3562500476837158,0.831250011920929,
                           1.1549999713897705,1.8725000619888303,2.091249942779541,1.881250023841858,1.1987500190734863,
                           0.4025000035762787,0.0525000020861625,0.0350000001490116,0.332500010728836,0.4462499916553497,
                           0.4112499952316284,0.2712500095367431,-0.1050000041723251,-0.2975000143051147,-0.0437499992549419,
                           0.7787500023841858,1.784999966621399,2.240000009536743,1.924999952316284,1.5049999952316284,
                           1.181249976158142,0.9449999928474426,0.8224999904632568,1.1375000476837158,1.399999976158142,
                           0.9362500309944152,0.0525000020861625,-0.3849999904632568,-0.2100000083446502,0.262499988079071,
                           0.7262499928474426,0.3937500119209289,-0.5249999761581421,-0.7262499928474426,-0.1137500032782554,
                           -0.9537500143051147,-1.8550000190734863,-0.3062500059604645,1.5575000047683716,0.9449999928474426,
                           -0.8050000071525574,-1.0237499475479126,-0.3675000071525574,0.3937500119209289,0.7699999809265137,
                           0.8575000166893005,0.7699999809265137,0.7787500023841858,1.2599999904632568,1.6100000143051147,
                           1.6537500619888306,1.951249957084656,2.555000066757202,2.2925000190734863,0.3149999976158142,
                           -3.8237500190734863,-15.251250267028809,-21.16625022888184,-10.578749656677246,-1.3562500476837158,
                           -7.131249904632568,-14.971250534057615,-22.74125099182129,-30.42374992370605,-39.77750015258789,
                           -50.653751373291016,-61.241249084472656,-65.22250366210938,-53.03374862670898,-38.876251220703125,
                           -30.56374931335449,-23.5987491607666,-20.20375061035156,-21.40250015258789,-16.922500610351562,
                           -73.62249755859375,-52.97249984741211,-41.282501220703125,-46.62874984741211,-56.97999954223633,
                           -60.91749954223633,-56.411251068115234,-41.91249847412109,-33.39875030517578,-35.13999938964844,
                           -29.38249969482422,-18.44499969482422,-10.045000076293944,-1.1725000143051147,7.49875020980835,
                           20.8075008392334,28.28874969482422,13.859999656677246,-7.306250095367432,-3.5174999237060547,
                           12.206250190734863,15.881250381469728,11.366250038146973,11.357500076293944,12.8100004196167,
                           13.52750015258789,16.721250534057617,26.53874969482422,54.07500076293945,60.50624847412109,
                           52.3337516784668,38.438751220703125,28.979999542236328,34.51874923706055,53.900001525878906,
                           67.67250061035156,68.44249725341797,60.95249938964844,54.897499084472656,59.84999847412109,
                           72.52874755859375,83.54499816894531,94.35124969482422,101.03624725341795,97.06375122070312,
                           83.29125213623047,65.24874877929688,57.102500915527344,58.29249954223633,59.42124938964844,
                           51.852500915527344,36.98625183105469,23.301250457763672,12.582500457763672,5.914999961853027,
                           9.59000015258789,21.07875061035156,32.41875076293945,34.3962516784668,30.729999542236328,
                           25.506250381469727,18.24374961853028,14.551250457763672,17.6924991607666,18.89999961853028,
                           15.592499732971191,13.300000190734863,14.227499961853027,14.36750030517578,16.528749465942383,
                           19.8799991607666,23.905000686645508,26.967500686645508,27.256250381469727,32.217498779296875,
                           37.8962516784668,43.3125,41.60625076293945,29.61874961853028,17.701250076293945,
                           12.547499656677246,12.223750114440918,19.801250457763672,30.4325008392334,39.89125061035156,
                           43.251251220703125,39.69874954223633,29.408750534057617,18.53249931335449,20.229999542236328,
                           27.737499237060547,34.151248931884766,37.834999084472656,33.90625,27.93874931335449,
                           30.71249961853028,37.178749084472656,38.272499084472656,33.14500045776367,26.21500015258789,
                           22.513750076293945,29.38249969482422,37.52000045776367,43.66249847412109,53.05125045776367,
                           56.665000915527344,44.36249923706055,28.875,24.02750015258789,28.18375015258789,
                           31.35124969482422,33.25,32.39250183105469,29.61000061035156,28.936250686645508,
                           26.32875061035156,27.93874931335449,29.52250099182129,28.74374961853028,29.04125022888184,
                           8.181249618530273,10.64875030517578,11.103750228881836,8.295000076293945,4.191249847412109,
                           2.8087499141693115,2.240000009536743,1.496250033378601,0.4200000166893005,-0.9100000262260436,
                           2.213750123977661,2.8350000381469727,-0.8575000166893005,-2.633749961853028,-1.3125,
                           0.831250011920929,1.4787499904632568,0.8400000333786011,-0.6912500262260437,-0.5687500238418579,
                           2.3012499809265137,3.202500104904175,2.1700000762939453,3.3600001335144043,3.6575000286102295,
                           2.5374999046325684,3.587500095367432,4.401249885559082,2.528749942779541,1.4874999523162842,
                           1.5137499570846558,2.056250095367432,-4.077499866485596,-5.136250019073486,-1.6012500524520874,
                           0.6299999952316284,0.5425000190734863,0.0,0.2100000083446502,0.6912500262260437};

float32_t gyrY_buff[256] = {-2.458750009536743,-2.3012499809265137,-2.6162500381469727,-2.887500047683716,-2.765000104904175,-2.677500009536743,
                           -2.782500028610229,-2.8087499141693115,-2.791249990463257,-3.018749952316284,-2.852499961853028,
                           -2.703749895095825,-2.484999895095825,-2.0737500190734863,-1.6362500190734863,-1.627500057220459,
                           -1.5137499570846558,-1.820000052452088,-2.2925000190734863,-3.009999990463257,-3.307500123977661,
                           -3.1237499713897705,-2.6600000858306885,-2.712500095367432,-2.7387499809265137,-2.817500114440918,
                           -2.633749961853028,-2.3887500762939453,-2.091249942779541,-1.715000033378601,-1.7937500476837158,
                           -1.898750066757202,-1.898750066757202,-2.3187499046325684,-2.5199999809265137,-2.782500028610229,
                           -2.870000123977661,-2.7300000190734863,-2.966249942779541,-3.071249961853028,-2.6600000858306885,
                           -2.5199999809265137,-2.651250123977661,-2.765000104904175,-2.668750047683716,-2.065000057220459,
                           -1.7937500476837158,-1.7762500047683716,-1.96875,-2.240000009536743,-2.432500123977661,
                           -2.493750095367432,-2.773750066757202,-3.184999942779541,-3.8762500286102295,-3.7799999713897705,
                           -3.587500095367432,-3.622499942779541,-3.5350000858306885,-3.009999990463257,-2.782500028610229,
                           -3.001250028610229,-3.0274999141693115,-2.765000104904175,-2.196249961853028,-1.7937500476837158,
                           -1.8287500143051147,-1.7762500047683716,-1.9075000286102293,-2.0037500858306885,-2.6862499713897705,
                           -3.211250066757202,-3.2637500762939453,-2.992500066757202,-3.2725000381469727,-3.8237500190734863,
                           -4.138750076293945,-3.71875,-5.005000114440918,-9.458749771118164,-19.0575008392334,
                           -29.09375,-39.20000076293945,-46.59375,-53.47124862670898,-62.37874984741211,
                           -70.41124725341797,-73.5,-69.60624694824219,-65.24874877929688,-61.46875,
                           -56.875,-53.182498931884766,-46.8650016784668,-40.88875198364258,-36.3125,
                           -1.6012500524520874,-1.662500023841858,-0.9887499809265136,-1.7762500047683716,-3.184999942779541,
                           -4.033750057220459,-5.661250114440918,-7.122499942779541,-8.618749618530273,-11.243749618530272,
                           -13.282500267028809,-13.440000534057615,-12.626250267028809,-10.771249771118164,-9.651249885559082,
                           -8.723750114440918,-7.516250133514404,-2.047499895095825,0.2975000143051147,-0.3849999904632568,
                           -1.0149999856948853,-0.4462499916553497,-0.962499976158142,-1.1462500095367432,0.262499988079071,
                           6.369999885559082,12.337499618530272,16.65999984741211,17.762500762939453,13.510000228881836,
                           7.761250019073486,4.130000114440918,2.747499942779541,0.9975000023841858,-1.8025000095367432,
                           -3.884999990463257,-6.650000095367432,-10.53499984741211,-14.236249923706056,-16.607500076293945,
                           -18.5674991607666,-19.87125015258789,-22.802499771118164,-25.357500076293945,-27.14249992370605,
                           -27.956249237060547,-29.487499237060547,-31.552499771118164,-33.26750183105469,-35.14875030517578,
                           -35.03499984741211,-35.157501220703125,-35.14875030517578,-35.306251525878906,-36.07625198364258,
                           -35.14875030517578,-35.21875,-35.997501373291016,-37.24874877929688,-38.43000030517578,
                           -38.76250076293945,-37.6775016784668,-36.3650016784668,-34.5625,-32.34000015258789,
                           -30.948749542236328,-29.24250030517578,-26.43375015258789,-24.28125,-22.627500534057617,
                           -20.57999992370605,-19.582500457763672,-18.217500686645508,-17.403749465942383,-16.204999923706055,
                           -14.192500114440918,-13.404999732971191,-13.27375030517578,-13.142499923706056,-12.363750457763672,
                           -10.86750030517578,-9.677499771118164,-10.0625,-10.4037504196167,-9.852499961853027,
                           -7.945000171661377,-7.621250152587891,-7.918749809265137,-7.568749904632568,-8.2162504196167,
                           -8.338749885559082,-8.050000190734863,-7.315000057220459,-6.807499885559082,-5.599999904632568,
                           -4.698750019073486,-4.138750076293945,-4.322500228881836,-4.53249979019165,-4.383749961853027,
                           -4.191249847412109,-3.1762499809265137,-2.992500066757202,-3.2462499141693115,-2.353749990463257,
                           -1.8112499713897705,-3.7799999713897705,-7.105000019073486,-7.288750171661377,-5.958750247955322,
                           -4.611249923706055,-4.033750057220459,-3.893749952316284,-3.815000057220459,-2.8350000381469727,
                           -2.747499942779541,-3.106250047683716,-4.173749923706055,-5.460000038146973,-6.798749923706055,
                           -2.6424999237060547,-2.9487500190734863,-3.4649999141693115,-4.340000152587891,-4.829999923706055,
                           -4.53249979019165,-3.954999923706055,-3.8324999809265137,-3.333750009536743,-3.596250057220459,
                           -3.0625,-2.931250095367432,-2.84375,-2.450000047683716,-2.380000114440918,
                           -2.625,-3.543750047683716,-3.954999923706055,-3.867500066757202,-3.237499952316284,
                           -1.846250057220459,-1.5399999618530271,-2.2225000858306885,-2.3187499046325684,-2.799999952316284,
                           -3.0274999141693115,-2.4412500858306885,-1.0325000286102295,-1.0412499904632568,-1.924999952316284,
                           -1.9162499904632568,-2.721250057220459,-3.141249895095825,-2.528749942779541,-2.283750057220459,
                           -2.852499961853028,-3.1237499713897705,-2.983750104904175,-2.2487499713897705,-2.380000114440918};

float32_t gyrZ_buff[256] = {-1.2074999809265137,-0.7699999809265137,-0.481249988079071,-0.2712500095367431,-0.2887499928474426,-0.3675000071525574,
                           -0.3587500154972076,-0.2887499928474426,-0.3849999904632568,-0.6212499737739563,-0.918749988079071,
                           -1.2687499523162842,-1.5750000476837158,-1.75,-1.7762500047683716,-1.820000052452088,
                           -1.5924999713897705,-1.2862499952316284,-0.831250011920929,-0.3587500154972076,0.0175000000745058,
                           0.1312499940395355,0.1312499940395355,-0.2537499964237213,-0.7787500023841858,-1.408750057220459,
                           -1.933750033378601,-2.1875,-2.362499952316284,-2.546250104904175,-2.4237499237060547,
                           -2.257499933242798,-1.986250042915344,-1.7062499523162842,-1.2074999809265137,-0.6650000214576721,
                           0.0350000001490116,0.5512499809265137,0.8137500286102295,0.7699999809265137,0.5862500071525574,
                           0.3062500059604645,-0.0700000002980232,-0.4550000131130218,-0.918749988079071,-1.4787499904632568,
                           -1.977499961853028,-2.353749990463257,-2.4412500858306885,-2.450000047683716,-2.4412500858306885,
                           -2.555000066757202,-2.747499942779541,-2.712500095367432,-2.458750009536743,-2.572499990463257,
                           -2.502500057220459,-2.563750028610229,-2.493750095367432,-2.3975000381469727,-1.8899999856948853,
                           -1.662500023841858,-1.6362500190734863,-1.6449999809265137,-1.399999976158142,-1.3562500476837158,
                           -1.1200000047683716,-0.6387500166893005,-0.5337499976158142,-0.4200000166893005,-0.2450000047683715,
                           -0.0350000001490116,0.332500010728836,1.837499976158142,4.208750247955322,7.454999923706055,
                           12.048749923706056,11.217499732971191,10.071249961853027,12.206250190734863,11.786250114440918,
                           12.425000190734863,13.71125030517578,15.233750343322754,16.712499618530273,16.1875,
                           12.862500190734863,9.135000228881836,5.985000133514404,4.331250190734863,1.6362500190734863,
                           1.4524999856948853,0.5425000190734863,-3.106250047683716,-3.333750009536743,-4.304999828338623,
                           40.696250915527344,41.91249847412109,40.1974983215332,37.14374923706055,35.63875198364258,
                           35.0525016784668,35.03499984741211,34.474998474121094,32.73374938964844,31.07999992370605,
                           30.283750534057617,27.614999771118164,23.633750915527344,20.06374931335449,16.703750610351562,
                           15.68000030517578,16.537500381469727,18.418750762939453,21.73500061035156,24.64875030517578,
                           23.966249465942383,20.29125022888184,15.592499732971191,13.63249969482422,8.487500190734863,
                           -5.389999866485596,-11.506250381469728,-19.24125099182129,-26.809999465942383,-33.88875198364258,
                           -39.45375061035156,-45.307498931884766,-52.81499862670898,-60.375,-65.59000396728516,
                           -69.20375061035156,-72.83499908447266,-77.66500091552734,-81.76000213623047,-82.94125366210938,
                           -84.53375244140625,-87.40374755859375,-90.04624938964844,-92.72374725341795,-94.79750061035156,
                           -95.76000213623048,-96.5999984741211,-95.56749725341795,-93.61624908447266,-90.76374816894533,
                           -87.49124908447266,-83.2387466430664,-79.25749969482422,-75.92375183105469,-72.76499938964844,
                           -69.41374969482422,-65.58125305175781,-61.661251068115234,-58.4587516784668,-54.56499862670898,
                           -50.57500076293945,-45.4474983215332,-40.56499862670898,-35.35874938964844,-29.75,
                           -25.165000915527344,-21.50749969482422,-17.998750686645508,-15.102499961853027,-13.116250038146973,
                           -12.092499732971191,-10.438750267028809,-9.887499809265137,-9.712499618530272,-8.706250190734863,
                           -8.198750495910645,-7.787499904632568,-7.708750247955322,-8.356249809265137,-8.75,
                           -9.651249885559082,-10.8149995803833,-11.77750015258789,-11.821249961853027,-11.66374969482422,
                           -10.31624984741211,-6.230000019073486,-2.362499952316284,-0.332500010728836,-1.058750033378601,
                           -4.182499885559082,-6.632500171661377,-7.953750133514404,-8.56624984741211,-8.6274995803833,
                           -8.723750114440918,-9.029999732971191,-10.1850004196167,-12.293749809265137,-13.824999809265137,
                           -15.119999885559082,-15.776249885559082,-16.59000015258789,-16.15250015258789,-16.39750099182129,
                           -17.079999923706055,-17.141250610351562,-16.126249313354492,-15.137499809265137,-15.723750114440918,
                           -17.0362491607666,-17.482500076293945,-17.001249313354492,-15.286250114440918,-13.81624984741211,
                           -12.75749969482422,-12.092499732971191,-12.7837495803833,-13.571249961853027,-13.518750190734863,
                           -4.007500171661377,-3.8324999809265137,-2.651250123977661,-1.0674999952316284,0.4287500083446502,
                           0.5249999761581421,-0.5162500143051147,-1.4612499475479126,-1.0674999952316284,-0.6387500166893005,
                           -0.2975000143051147,-0.2100000083446502,-0.6474999785423279,-1.6537500619888306,-1.662500023841858,
                           -0.5249999761581421,0.5774999856948853,0.7175000309944153,0.4112499952316284,-0.4637500047683716,
                           -1.4262499809265137,-1.5049999952316284,-0.5774999856948853,0.4637500047683716,0.8487499952316284,
                           0.5950000286102295,-0.6387500166893005,-1.3212499618530271,-0.612500011920929,-1.0850000381469729,
                           -0.4550000131130218,0.6387500166893005,0.6912500262260437,-0.1050000041723251,-0.7612500190734863,
                           -0.7962499856948853,-0.6737499833106995,-0.6650000214576721,-0.8837500214576721,-0.8924999833106995};







void mlf_fill_features_arr(float* acc_X,
    float* acc_Y,
    float* acc_Z,
    float* gyr_X,
    float* gyr_Y,
    float* gyr_Z,
    uint16_t n_samples,
    float *features)
{
    float *axis[6] = { acc_X, acc_Y, acc_Z, gyr_X, gyr_Y, gyr_Z };
   
    for (uint16_t i = 0; i < 6; i++)
    {
        mlf_fill_raw_drinking_features(&features[i * 13], axis[i], n_samples);
    }
    for (uint16_t i = 0; i < 6; i++)
    {
        mlf_fill_frequency_eating_features(&features[i * 36 + 78], axis[i], n_samples);
    }
    //CF_standardize_features(features);
}

int main(void)
{

    APP_ERROR_CHECK(NRF_LOG_INIT(NULL));
    NRF_LOG_DEFAULT_BACKENDS_INIT();
	
    NRF_LOG_INFO("This is a log data from nrf");
    nrf_gpio_cfg_input(BUTTON, NRF_GPIO_PIN_PULLUP);
    imu_init(&lsm6dsl_dev_ctx_t);
    mlf_fill_features_arr(accX_buff, accY_buff, accZ_buff, gyrX_buff, gyrY_buff, gyrZ_buff, 256, feature);
    float result[2];
    char buffer[5000];
    
   score(feature, result);
    sprintf(buffer, "res[0] = %f  res[1] = %f", result[0], result[1]);
    
    NRF_LOG_INFO("%s", buffer);
    int len = 0;
    for (int i = 0; i < 294; i++)
    {
        len += sprintf(buffer + len, "%f,", feature[i]);
    }
    NRF_LOG_INFO("%s", buffer);
	for (;;)
	{
    	if (nrf_gpio_pin_read(BUTTON) == 0)
    	{
        	NRF_LOG_INFO("Button");
        	imu_fifo_mode(&lsm6dsl_dev_ctx_t, IMU_FIFO_SIZE);
        	while (nrf_gpio_pin_read(BUTTON) == 0) ;
        	
    	}
    	imu_handle_fifo_transfer_done();
                             
	}
}
